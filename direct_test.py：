```python
#!/usr/bin/env python3
"""
ç›´æ¥æµ‹è¯•DIDæ¨¡å—ï¼Œä¸ä¾èµ–pytestçš„å¯¼å…¥ç³»ç»Ÿ
"""

import sys
import os

# è®¾ç½®Pythonè·¯å¾„
project_root = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, os.path.join(project_root, 'src'))

def test_did_basics():
    """æµ‹è¯•DIDåŸºæœ¬åŠŸèƒ½"""
    from core.did import DID
    
    print("æµ‹è¯•1: åˆ›å»ºDID")
    did1 = DID.create(did_type="resident")
    assert did1.did.startswith("did:xca:resident:")
    print(f"  âœ“ åˆ›å»ºæˆåŠŸ: {did1}")
    
    print("\næµ‹è¯•2: è§£æDID")
    test_str = "did:xca:organization:test_org"
    did2 = DID.parse(test_str)
    assert did2.did == test_str
    print(f"  âœ“ è§£ææˆåŠŸ: {did2}")
    
    print("\næµ‹è¯•3: ç”Ÿæˆæ–‡æ¡£")
    doc = did1.generate_document()
    assert doc["id"] == did1.did
    print(f"  âœ“ æ–‡æ¡£ç”ŸæˆæˆåŠŸ")
    
    print("\næµ‹è¯•4: å¼‚å¸¸å¤„ç†")
    from core.exceptions import DIDValidationError
    try:
        DID.parse("invalid")
        assert False, "åº”è¯¥æŠ›å‡ºå¼‚å¸¸"
    except DIDValidationError:
        print(f"  âœ“ æ­£ç¡®æ•è·å¼‚å¸¸")
    
    print("\næµ‹è¯•5: ç›¸ç­‰æ€§æ¯”è¾ƒ")
    did3 = DID.parse("did:xca:device:same")
    did4 = DID.parse("did:xca:device:same")
    assert did3 == did4
    print(f"  âœ“ ç›¸ç­‰æ€§æµ‹è¯•é€šè¿‡")
    
    return True

if __name__ == "__main__":
    print("ğŸš€ Xiongan Civilization OS - ç›´æ¥æµ‹è¯•")
    print("=" * 50)
    
    try:
        success = test_did_basics()
        if success:
            print("\n" + "=" * 50)
            print("ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼DIDæ¨¡å—åŠŸèƒ½å®Œæ•´ã€‚")
            print("\nå¯ä»¥å¼€å§‹æ„å»ºCVè´¦æˆ·ç³»ç»Ÿäº†ï¼")
    except Exception as e:
        print(f"\nâŒ æµ‹è¯•å¤±è´¥: {type(e).__name__}: {e}")
        import traceback
        traceback.print_exc()
```
